<div class="padded-page">
  <app-page-header></app-page-header>
  <app-title-and-trail [title]="'Collection - ' + collection.name">
    <mat-button-toggle-group name="fontStyle" class="toggle-group" [(ngModel)]="mode">
      <mat-button-toggle value="view">View</mat-button-toggle>
      <mat-button-toggle value="filter">Filter</mat-button-toggle>
      <mat-button-toggle value="fastAdd">Fast Add</mat-button-toggle>
    </mat-button-toggle-group>

    <button class="options-button mat-elevation-z4"
      (click)="toggleBookmark()"
      mat-icon-button matTooltip="Toggle Bookmark">
      <mat-icon>{{ collection.isBookmarked ? 'bookmark' : 'bookmark_border' }}</mat-icon>
    </button>
  </app-title-and-trail>

  <div fxLayout="row" fxLayoutGap="20px">
    <app-card-filter *ngIf="mode === 'filter'" (filterChanged)="filter = $event"></app-card-filter>
    <app-card-rapid-entry *ngIf="mode === 'fastAdd'" (searched)="refreshDataSource()" [collection]="collection"></app-card-rapid-entry>

    <app-card-instance-grid fxFlex
      [filter]="filter"
      [displayedColumns]="['name', 'setSymbol', 'manaCost', 'power', 'toughness', 'foil', 'promo', 'actions']"
      [wrappedService]="wrappedService"
      (rowSelected)="cardInstanceSelected($event)">

      <ng-container matColumnDef="actions">
        <mat-header-cell class="crud-grid-action-column" *matHeaderCellDef></mat-header-cell>
        <mat-cell class="crud-grid-action-column" *matCellDef="let record">
          <button mat-icon-button (click)="$event.stopPropagation(); removeFromCollection(record)">
            <mat-icon>highlight_off</mat-icon>
          </button>
        </mat-cell>
      </ng-container>
    </app-card-instance-grid>
  </div>
</div>
